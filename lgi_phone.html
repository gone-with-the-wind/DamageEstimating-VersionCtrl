<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>登录</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">

</head>
<body ng-app="app" ng-controller="ctrl">
<div class="container">
    <div class="login_box">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title text-center">手机验证登录</h3>
            </div>
            <div class="panel-body">
                <div class="input-group mb20 mt10">
                    <span class="input-group-addon" id="username"><i class="glyphicon glyphicon-phone-alt"></i></span>
                    <input type="text" class="form-control" placeholder="手机号" aria-describedby="username" ng-model="telephone">
                    
                </div>
                <div class="input-group mb20">
                    <span class="input-group-addon" id="password"><i class="glyphicon glyphicon-pencil"></i></span>
                    <input type="text" class="form-control" placeholder="验证码" aria-describedby="password" ng-model="code">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" ng-click="getVeriCode()">获取验证码</button>
                    </span>
                </div>
                去<a href="login.html">密码登录</a>
                <button type="button" class="btn btn-primary pull-right">登录</button>
            </div>
        </div>
    </div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/angular.min.js"></script>
<script>
    var app=angular.module("app",[]);
    app.config(["$sceDelegateProvider",function($sceDelegateProvider){
        $sceDelegateProvider.resourceUrlWhitelist(["self","http://116.62.174.175:8080/**","http://localhost:8082/**"])
    }])

    app.controller("ctrl",["$scope","$http",function($scope,$http){
        $scope.getVeriCode=function(){
            var fd = new FormData();
            
            fd.append('type', 0); 
            fd.append('phone', $scope.telephone); 
            fd.append('content',{"code":$scope.code});
            
            

            $http.jsonp('http://116.62.174.175:8080/DamageEstimating-1.0-SNAPSHOT/sms/sen')
            
            .then(function (response) {
                console.log('Get Jenkins Jobs OK')
                $scope.lists = response.data;
            },function (error) {
                console.log(error)
            });
        }
        
    }])
</script>

</body>
</html>



 
<!-- <div class="container">
    <div class="login_box">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title text-center">手机验证登录</h3>
            </div>
            <div class="panel-body">
                <div class="input-group mb20 mt10">
                    <span class="input-group-addon" id="username"><i class="glyphicon glyphicon-phone-alt"></i></span>
                    <input type="text" class="form-control" placeholder="手机号" aria-describedby="username" ng-model="telephone">

                </div>
                <div class="input-group mb20">
                    <span class="input-group-addon" id="password"><i class="glyphicon glyphicon-pencil"></i></span>
                    <input type="text" id="test"  class="form-control" placeholder="验证码" aria-describedby="password" ng-model="code">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" id="get_code">获取验证码</button>
                        <button class="btn btn btn-default" style="display: none" type="button" id="send_code2" >60s后重新发送</button>

                    </span>
                </div>

                去<a href="login.html">密码登录</a>
                <button type="button" class="btn btn-primary pull-right Lbtn" >登录</button>
            </div>
        </div>
    </div>
</div> -->

   <!--  $(function () {
        var code = $(".test").val();
        var  name=$(".form-control").val();

        $(".get_code").click(function(){
            $.ajax({
                type: 'POST',
                url:'...',
                data: {
                    telphone:name,
                    flag:"1"
                } ,
                success:function(data){
                    console.log(data.msg)
                },

                dataType:'json'
            });
        })

        $(".Lbtn").click(function(){
            $.ajax({
                type: 'POST',
                url:'...' ,
                data: {
                    telphone:name,
                    code:code
                } ,
                success:function(data){
                        var str = data.msg;
                        sid = data.data;
                        localStorage.setItem("key", sid);
                        if(str == "登录成功"){
                            window.open("xxx.html","_self")
                        }
                },
                error:function(){
                    alert("您的输入有误，请重新输入")
                }
            });
        })
        //倒计时
        $("#get_code").click(function(){
            var num = 60;
            $(this).css("display","none");
            $("#send_code2").text("60s后重新发送");
            $("#send_code2").css("display","block");
            
            timer = setInterval(function(){
                
                num = --num;

                var str = num+"s后重新发送";

                 $("#send_code2").text(str);
                
                 console.log(num)

                if(num < 1){
                    $("#get_code").css("display","block");
                    $("#send_code2").css("display","none");
                    clearInterval(timer);
                    return;

                }

               

                

            },1000)
        })
    }) -->

